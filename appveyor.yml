# Test against the latest version of this Node.js version
environment:
  nodejs_version: "6"
  npm_auth_token:
    secure: MTxaJAzwhthjx8jui1hA/Q2RXK2wah6YZ24T2cvebm4ZgIjh8ucLLvLR6pn09Mdm

# Install scripts. (runs after repo cloning)
install:
- ps: >-
    Install-Product node $env:nodejs_version
    npm install --loglevel=error

    "//registry.npmjs.org/:_authToken=$env:npm_auth_token`n" | out-file "$env:userprofile\.npmrc" -Encoding ASCII
after_deploy:
- ps: npm publish --access public 

# Post-install test scripts.
test_script:
  # Output useful info for debugging.
  - node --version
  - npm --version
  # run tests
  - npm run lint
  - npm version %APPVEYOR_BUILD_VERSION% -m 'v%APPVEYOR_BUILD_VERSION%'

# Don't actually build.
build: off

notifications:
- provider: Slack
  incoming_webhook:
    secure: JhngXiwYl7JkEO7bo4Fh1k6rOy+lZ3dFxGFI4FL3Iep6ruC4WVIj35Px/jzc4Xi0GbEAGTjRQi8NZg4s0V0zZGn3IMRp+HNRdMzmh/Y492s=
  channel: '#build-success'
  on_build_success: true
  on_build_failure: false
  on_build_status_changed: false
  template: "<{{buildUrl}}|Build [{{projectName}}] {{buildVersion}} {{status}}> Commit <{{commitUrl}}|{{commitId}}> by {{commitAuthor}} on {{commitDate}}: _{{commitMessage}}_"  
- provider: Slack
  incoming_webhook:
    secure: JhngXiwYl7JkEO7bo4Fh1k6rOy+lZ3dFxGFI4FL3IeqzmMP5SvRSku5VvYel8VEXyavmuo/izODp6H0mjj4tSZhumWBkfENV0JNN+W6Kss8=
  channel: '#build-failed'
  on_build_success: false
  on_build_failure: true
  on_build_status_changed: false
  template: "<{{buildUrl}}|Build [{{projectName}}] {{buildVersion}} {{status}}> Commit <{{commitUrl}}|{{commitId}}> by {{commitAuthor}} on {{commitDate}}: _{{commitMessage}}_"
  
  
skip_tags: true
version: 7.0.{build}
deploy:
- provider: GitHub
  auth_token:
    secure: 73BMyeWNs+Y0cyNA2FzsPiO4b93zn8pBdSO/oPc9GvT+znZj4vZAWF0bIu0G6G3i
  on:
    branch: master